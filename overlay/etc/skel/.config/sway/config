# uConsole CM5 Sway Config - wpgtk theming
# Colors extracted from wallpaper using wpgtk

# Logo key. Use Mod1 for Alt.
set $mod Mod1
set $alt Shift
set $left h
set $down j
set $up k
set $right l
set $term kitty
set $menu wofi --show drun

# wpgtk colors - update these by running:
# wpg -s /path/to/wallpaper.jpg
# Then copy colors from ~/.config/wpg/schemes/*.json
set $bg #12100d
set $fg #dacbb0
set $accent #924623
set $inactive #6C654D
set $urgent #3A4542

### Output - uConsole DSI display rotated for landscape
# Note: Use $HOME instead of ~ for proper path expansion in output blocks
output DSI-1 {
    mode 720x1280
    transform 90
    scale 1
    bg $HOME/.config/sway/wallpaper.jpg fill
}

output * bg $HOME/.config/sway/wallpaper.jpg fill

### Swaylock configuration (visible indicator ring)
set $lock swaylock -f \
    --color 12100d \
    --inside-color 12100dcc \
    --ring-color 924623 \
    --key-hl-color dacbb0 \
    --bs-hl-color 3A4542 \
    --ring-ver-color 6C654D \
    --inside-ver-color 6C654Dcc \
    --text-color dacbb0 \
    --indicator-radius 80 \
    --indicator-thickness 8

### Idle
exec swayidle -w \
    timeout 300 '$lock' \
    timeout 600 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep '$lock'

### Lock screen on boot (for security)
exec $lock

### Input - uConsole hardware
input "7855:36:ClockworkPI_uConsole_Keyboard" {
    xkb_layout us
    repeat_delay 300
    repeat_rate 30
}

input "7855:36:ClockworkPI_uConsole_Mouse" {
    accel_profile flat
    pointer_accel -0.3
    scroll_factor 1.0
}

input type:touchpad {
    tap enabled
    natural_scroll enabled
    dwt enabled
}

### Key bindings
bindsym $mod+Return exec $term
bindsym $mod+$alt+q kill
bindsym $mod+d exec $menu
floating_modifier $mod normal
bindsym $mod+$alt+c reload
bindsym $mod+$alt+e exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'

bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+$alt+$left move left
bindsym $mod+$alt+$down move down
bindsym $mod+$alt+$up move up
bindsym $mod+$alt+$right move right
bindsym $mod+$alt+Left move left
bindsym $mod+$alt+Down move down
bindsym $mod+$alt+Up move up
bindsym $mod+$alt+Right move right

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+$alt+1 move container to workspace number 1
bindsym $mod+$alt+2 move container to workspace number 2
bindsym $mod+$alt+3 move container to workspace number 3
bindsym $mod+$alt+4 move container to workspace number 4
bindsym $mod+$alt+5 move container to workspace number 5
bindsym $mod+$alt+6 move container to workspace number 6
bindsym $mod+$alt+7 move container to workspace number 7
bindsym $mod+$alt+8 move container to workspace number 8
bindsym $mod+$alt+9 move container to workspace number 9
bindsym $mod+$alt+0 move container to workspace number 10

bindsym $mod+$alt+b splith
bindsym $mod+$alt+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+$alt+f fullscreen
bindsym $mod+$alt+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent

bindsym $mod+$alt+minus move scratchpad
bindsym $mod+$alt+equal scratchpad show

mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### uConsole hardware keys
bindsym XF86MonBrightnessUp exec brightnessctl -q set +1
bindsym XF86MonBrightnessDown exec brightnessctl -q set 1-
# Alt+bracket brightness controls for uConsole keyboard
bindsym Mod1+bracketleft exec brightnessctl -q set 1-
bindsym Mod1+bracketright exec brightnessctl -q set +1
bindsym XF86AudioRaiseVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym Print exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Print exec grim - | wl-copy

### Window colors - from wpgtk
client.focused          $accent   $bg $fg $accent   $accent
client.focused_inactive $inactive $bg $fg $inactive $inactive
client.unfocused        $inactive $bg $fg $inactive $inactive
client.urgent           $urgent   $bg $fg $urgent   $urgent

### Appearance
default_border pixel 2
default_floating_border pixel 2
gaps inner 4
gaps outer 2
smart_gaps on
smart_borders on
font pango:Droid Sans 8

### Status bar
bar {
    swaybar_command waybar
}

### Autostart
exec_always pkill -x kanshi; kanshi
exec mako
exec /usr/libexec/polkit-gnome-authentication-agent-1
